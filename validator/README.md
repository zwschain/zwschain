# 验证模块
## 使用场景
验证模块的使用原则是不相信任何的输入，而输入主要包括P2P网络的输入和客户端输入。
验证模块主要是在P2P收到一个广播过来的Unit或者Tx的时候进行验证。另外gptn作为一个客户端时，在生成交易，并将交易添加到交易池时也需要对Tx进行验证。

## Tx的验证
### P2P收到一条新交易时的验证
### 本地交易池添加交易时的验证
## Unit的验证
### P2P收到一个新单元时的验证
1. 验证Header是否正确
2. 验证每一条Tx是否正确（如果已经在验证缓存，就不需要重复验证）
3. 验证每一条Tx是否存在双花（这里不能用缓存）
4. 验证手续费的分配是否正确（Coinbase验证）

### 双花交易的判断
* 一笔交易里面包含的Input中引用了同一个UTXO
* 一个单元里面包含的多个Tx中引用了同一个UTXO
* 一笔交易引用的UTXO与交易池中的另一个交易相同